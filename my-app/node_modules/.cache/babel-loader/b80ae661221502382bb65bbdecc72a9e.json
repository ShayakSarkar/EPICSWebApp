{"ast":null,"code":"var _jsxFileName = \"/home/shayak/Desktop/MyPrograms/GroupProject/my-app/src/components/doc_form_page/DocForm.js\";\nimport React from 'react';\nimport './DocForm.css';\nimport Disease from './Disease';\nimport Container from './Container';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DocForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patientDetails: {},\n      showPatientCard: false,\n      patientId: null\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:5000/get_patient_details/', {\n      method: 'GET',\n      credentials: 'include'\n    }).then(e => e.json()).then(function (e) {\n      console.log('DocForm.js: componentDidMount(): ', e);\n      this.setState({\n        patientDetails: e['patient_details']\n      });\n    }.bind(this));\n  }\n\n  showPatientDetails(event) {\n    event.preventDefault();\n    var patId = event.target.textContent;\n    console.log(patId);\n    console.log(this.state);\n    this.setState({\n      showPatientCard: true,\n      patientId: patId\n    });\n  }\n\n  addDisease(diseaseObj) {\n    var tempObj = this.state.patientDetails;\n    console.log('DocForm.js: addDisease():', diseaseObj);\n    tempObj[this.state.patientId]['current_medications'][diseaseObj['name']] = {\n      medications: diseaseObj['medications'],\n      avoid: diseaseObj['avoid']\n    };\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeDisease(diseaseName) {\n    var tempObj = this.state.patientDetails;\n    delete tempObj[this.state.patientId]['current_medications'][diseaseName];\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  addMedication(diseaseName, medicine) {\n    console.log('DocForm.js: addMedication() ', diseaseName);\n    console.log('DocForm.js: addMedication() medicine =', medicine);\n    var tempObj = this.state.patientDetails;\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'].push(medicine);\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeMedication(diseaseName, medicine) {\n    var tempObj = this.state.patientDetails;\n    var list = tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'];\n    var newList = [];\n\n    for (var i in list) {\n      if (list[i] != medicine) {\n        newList.push(list[i]);\n      }\n    }\n\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'] = newList;\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  addAvoid(diseaseName, avoid) {\n    var tempObj = this.state.patientDetails;\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'].push(avoid);\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeAvoid(diseaseName, avoid) {\n    var tempObj = this.state.patientDetails;\n    var newList = [];\n    var list = tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'];\n\n    for (var i in list) {\n      if (list[i] != avoid) {\n        newList.push(list[i]);\n      }\n    }\n\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'] = newList;\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  getPatientCard(patId) {\n    if (!patId) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 20\n      }, this);\n    }\n\n    console.log('getPatientCard: patient id: ', patId);\n    var disList = [];\n\n    for (var key in this.state.patientDetails[patId]['medical_history']) {\n      disList.push(key);\n    }\n\n    function makeDiseaseDetail(details, name) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Disease Name: \", name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 37\n        }, this), \"Medications: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: details['medications'].map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: e\n          }, e, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 54\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), \"Things to Avoid: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: details['avoid'].map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: e\n          }, e, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 20\n      }, this);\n    }\n\n    var medHistory = disList.map(dis => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: makeDiseaseDetail(this.state.patientDetails[patId]['medical_history'][dis], dis)\n    }, dis, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 41\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Name: \", this.state.patientDetails[patId]['name'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 61\n      }, this), \"Age: \", this.state.patientDetails[patId]['age'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 59\n      }, this), \"Blood Group: \", this.state.patientDetails[patId]['blood_group'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 75\n      }, this), \"Medical History:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: medHistory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this), \"Current Medications: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(Disease, {\n        currentDiseases: this.state.patientDetails[patId]['current_medications'],\n        addDisease: this.addDisease.bind(this),\n        removeDisease: this.removeDisease.bind(this),\n        addMedication: this.addMedication.bind(this),\n        removeMedication: this.removeMedication.bind(this),\n        addAvoid: this.addAvoid.bind(this),\n        removeAvoid: this.removeAvoid.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 16\n    }, this);\n  }\n\n  sendData(e) {\n    e.preventDefault();\n    fetch('http://localhost:5000/send_patient_data/', {\n      method: 'POST',\n      credentails: 'include',\n      body: JSON.stringify(this.state.patientDetails)\n    }).then(e => e.json()).then(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    var patientIds = [];\n    /*\n        data is of the form:\n        data: [patid(email add): {\n                medical_history: [disease1:{\n                        medications: [med1,med2,med3].\n                        avoid: [av1,av2,av3]\n                    },\n                    disease2: {\n                        medicatiosn: [med1,med2,med3],\n                        avoid: [av1,av2,av3]\n                    }\n                ],\n                current_medications: [disease1: {\n                        medications: [],\n                        avoid: []\n                    },\n                    disease2: {\n                        medications: [],\n                        avoid: []\n                    },\n                ]\n            },\n            patid: ...,\n            patid: ...\n        ]\n    */\n\n    for (var key in this.state.patientDetails) {\n      patientIds.push(key);\n    }\n\n    var patientButtons = patientIds.map(id => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: this.showPatientDetails.bind(this),\n      className: \"PatientIdButton\",\n      children: id\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 47\n    }, this));\n    patientButtons = /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: patientButtons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 24\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [patientButtons, /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: this.state.showPatientCard && 'block' || 'none'\n        },\n        children: this.getPatientCard(this.state.patientId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.sendData.bind(this),\n        children: \"Update Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nexport default DocForm;","map":{"version":3,"sources":["/home/shayak/Desktop/MyPrograms/GroupProject/my-app/src/components/doc_form_page/DocForm.js"],"names":["React","Disease","Container","DocForm","Component","constructor","props","state","patientDetails","showPatientCard","patientId","componentDidMount","fetch","method","credentials","then","e","json","console","log","setState","bind","showPatientDetails","event","preventDefault","patId","target","textContent","addDisease","diseaseObj","tempObj","medications","avoid","removeDisease","diseaseName","addMedication","medicine","push","removeMedication","list","newList","i","addAvoid","removeAvoid","getPatientCard","disList","key","makeDiseaseDetail","details","name","map","medHistory","dis","sendData","credentails","body","JSON","stringify","render","patientIds","patientButtons","id","display"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './DocForm.css';\nimport Disease from './Disease';\nimport Container from './Container';\n\nclass DocForm extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            patientDetails:{},\n            showPatientCard: false,\n            patientId: null\n        };\n    }\n    componentDidMount(){\n        fetch('http://localhost:5000/get_patient_details/',{\n            method: 'GET',\n            credentials: 'include'\n        })\n        .then(e=>e.json())\n        .then(function(e){\n            console.log('DocForm.js: componentDidMount(): ',e);\n            this.setState({\n                patientDetails: e['patient_details']\n            });\n        }.bind(this));\n    }\n    showPatientDetails(event){\n        event.preventDefault();\n        var patId=event.target.textContent;\n        console.log(patId);\n        console.log(this.state);\n        this.setState({\n            showPatientCard: true,\n            patientId: patId\n        })\n    }\n    addDisease(diseaseObj){\n        var tempObj=this.state.patientDetails;\n        console.log('DocForm.js: addDisease():',diseaseObj);\n        tempObj[this.state.patientId]['current_medications'][diseaseObj['name']]={\n            medications: diseaseObj['medications'],\n            avoid: diseaseObj['avoid']\n        };\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeDisease(diseaseName){\n        var tempObj=this.state.patientDetails;\n        delete tempObj[this.state.patientId]['current_medications'][diseaseName]\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    addMedication(diseaseName,medicine){\n        console.log('DocForm.js: addMedication() ',diseaseName);\n        console.log('DocForm.js: addMedication() medicine =',medicine);\n        var tempObj=this.state.patientDetails;\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'].push(medicine);\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeMedication(diseaseName,medicine){\n        var tempObj=this.state.patientDetails;\n        var list=tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'];\n        var newList=[];\n        for(var i in list){\n            if(list[i]!=medicine){\n                newList.push(list[i]);\n            }\n        }\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['medications']=newList;\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    addAvoid(diseaseName,avoid){\n        var tempObj=this.state.patientDetails;\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'].push(avoid);\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeAvoid(diseaseName,avoid){\n        var tempObj=this.state.patientDetails;\n        var newList=[];\n        var list=tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'];\n        for(var i in list){\n            if(list[i]!=avoid){\n                newList.push(list[i]);\n            }\n        }\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid']=newList;\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    getPatientCard(patId){\n        if(!patId){\n            return <div></div>;\n        }\n        console.log('getPatientCard: patient id: ',patId);\n        var disList=[];\n        for(var key in this.state.patientDetails[patId]['medical_history']){\n            disList.push(key);\n        }\n        function makeDiseaseDetail(details,name){\n            return <div>\n                Disease Name: {name}<br/>\n                Medications: <br/>\n                <ul>\n                    {details['medications'].map((e)=><li key={e}>{e}</li>)}\n                </ul>\n                Things to Avoid: <br/>\n                <ul>\n                    {details['avoid'].map((e)=><li key={e}>{e}</li>)}\n                </ul>\n            </div>;\n        }\n        var medHistory=disList.map(dis=><li key={dis}>{makeDiseaseDetail(this.state.patientDetails[patId]['medical_history'][dis],dis)}</li>);\n        return <div>\n            Name: {this.state.patientDetails[patId]['name']}<br/>\n            Age: {this.state.patientDetails[patId]['age']}<br/>\n            Blood Group: {this.state.patientDetails[patId]['blood_group']}<br/>\n            Medical History:<br/>\n            <ul>\n                {medHistory}\n            </ul>\n            Current Medications: <br/>\n            <Disease currentDiseases={this.state.patientDetails[patId]['current_medications']}\n                addDisease={this.addDisease.bind(this)}\n                removeDisease={this.removeDisease.bind(this)}\n                addMedication={this.addMedication.bind(this)}\n                removeMedication={this.removeMedication.bind(this)}\n                addAvoid={this.addAvoid.bind(this)}\n                removeAvoid={this.removeAvoid.bind(this)}\n            />\n        </div>\n    }\n    sendData(e){\n        e.preventDefault();\n        fetch('http://localhost:5000/send_patient_data/',{\n            method: 'POST',\n            credentails: 'include',\n            body: JSON.stringify(this.state.patientDetails)\n        })\n        .then(e=>e.json())\n        .then(e=>{\n            console.log(e);\n        })\n    }\n    render(){\n        var patientIds=[];\n        /*\n            data is of the form:\n            data: [patid(email add): {\n                    medical_history: [disease1:{\n                            medications: [med1,med2,med3].\n                            avoid: [av1,av2,av3]\n                        },\n                        disease2: {\n                            medicatiosn: [med1,med2,med3],\n                            avoid: [av1,av2,av3]\n                        }\n                    ],\n                    current_medications: [disease1: {\n                            medications: [],\n                            avoid: []\n                        },\n                        disease2: {\n                            medications: [],\n                            avoid: []\n                        },\n                    ]\n                },\n                patid: ...,\n                patid: ...\n            ]\n        */\n        for(var key in this.state.patientDetails){\n            patientIds.push(key);\n        }\n        var patientButtons=patientIds.map(id=><button key={id} onClick={this.showPatientDetails.bind(this)} className='PatientIdButton'>{id}</button>);\n        patientButtons=<ul>{patientButtons}</ul>\n        return <div>\n            {patientButtons}\n            <div style={{display: (this.state.showPatientCard && 'block') || 'none'}}>\n                {this.getPatientCard(this.state.patientId)}\n            </div>\n            <button onClick={this.sendData.bind(this)}>Update Data</button>\n        </div>;\n    }\n}\nexport default DocForm;\n"]},"metadata":{},"sourceType":"module"}