{"ast":null,"code":"var _jsxFileName = \"/home/shayak/Desktop/MyPrograms/GroupProject/my-app/src/components/doc_form_page/DocForm.js\";\nimport React from 'react';\nimport './DocForm.css';\nimport Disease from './Disease';\nimport Container from './Container';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass DocForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patientDetails: {\n        'pat1@gmail.com': {\n          name: 'Shayak Sarkar',\n          age: 21,\n          blood_group: 'O-',\n          medical_history: {\n            disease1: {\n              medications: ['med1', 'med2', 'med3'],\n              avoid: ['av1', 'av2', 'av3']\n            },\n            disease2: {\n              medications: ['med1', 'med2', 'med3'],\n              avoid: ['av1', 'av2', 'av3']\n            }\n          },\n          current_medications: {\n            disease1: {\n              medications: [],\n              avoid: []\n            }\n          }\n        },\n        'pat2@gmail.com': {\n          name: 'Random Sad Person',\n          age: 20,\n          blood_group: 'Z*',\n          medical_history: {},\n          current_medications: {\n            'Random Disease': {\n              medications: ['med1', 'med2'],\n              avoid: ['everything', 'nothing']\n            }\n          }\n        }\n      },\n      showPatientCard: false,\n      patientId: null\n    };\n  }\n\n  componentDidMount() {\n    var reflectDetails = function (e) {\n      this.setState({\n        patientDetails: e['patient_details']\n      });\n    };\n\n    reflectDetails.bind(this);\n    fetch('http://localhost:5000/get_patient_details/', {\n      method: 'GET',\n      credentials: 'include'\n    }).then(e => e.json()).then(e => {\n      console.log('DocForm.js: componentDidMount(): ', e);\n      reflectDetails(e);\n    });\n  }\n\n  showPatientDetails(event) {\n    event.preventDefault();\n    var patId = event.target.textContent;\n    console.log(patId);\n    console.log(this.state);\n    this.setState({\n      showPatientCard: true,\n      patientId: patId\n    });\n  }\n\n  addDisease(diseaseObj) {\n    var tempObj = this.state.patientDetails;\n    console.log('DocForm.js: addDisease():', diseaseObj);\n    tempObj[this.state.patientId]['current_medications'][diseaseObj['name']] = {\n      medications: diseaseObj['medications'],\n      avoid: diseaseObj['avoid']\n    };\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeDisease(diseaseName) {\n    var tempObj = this.state.patientDetails;\n    delete tempObj[this.state.patientId]['current_medications'][diseaseName];\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  addMedication(diseaseName, medicine) {\n    console.log('DocForm.js: addMedication() ', diseaseName);\n    console.log('DocForm.js: addMedication() medicine =', medicine);\n    var tempObj = this.state.patientDetails;\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'].push(medicine);\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeMedication(diseaseName, medicine) {\n    var tempObj = this.state.patientDetails;\n    var list = tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'];\n    var newList = [];\n\n    for (var i in list) {\n      if (list[i] != medicine) {\n        newList.push(list[i]);\n      }\n    }\n\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'] = newList;\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  addAvoid(diseaseName, avoid) {\n    var tempObj = this.state.patientDetails;\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'].push(avoid);\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  removeAvoid(diseaseName, avoid) {\n    var tempObj = this.state.patientDetails;\n    var newList = [];\n    var list = tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'];\n\n    for (var i in list) {\n      if (list[i] != avoid) {\n        newList.push(list[i]);\n      }\n    }\n\n    tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'] = newList;\n    this.setState({\n      patientDetails: tempObj\n    });\n  }\n\n  getPatientCard(patId) {\n    if (!patId) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 20\n      }, this);\n    }\n\n    console.log('getPatientCard: patient id: ', patId);\n    var disList = [];\n\n    for (var key in this.state.patientDetails[patId]['medical_history']) {\n      disList.push(key);\n    }\n\n    function makeDiseaseDetail(details, name) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Disease Name: \", name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 37\n        }, this), \"Medications: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: details['medications'].map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: e\n          }, e, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 54\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this), \"Things to Avoid: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: details['avoid'].map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: e\n          }, e, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 20\n      }, this);\n    }\n\n    var medHistory = disList.map(dis => /*#__PURE__*/_jsxDEV(\"li\", {\n      children: makeDiseaseDetail(this.state.patientDetails[patId]['medical_history'][dis], dis)\n    }, dis, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 41\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Name: \", this.state.patientDetails[patId]['name'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 61\n      }, this), \"Age: \", this.state.patientDetails[patId]['age'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 59\n      }, this), \"Blood Group: \", this.state.patientDetails[patId]['blood_group'], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 75\n      }, this), \"Medical History:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: medHistory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }, this), \"Current Medications: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(Disease, {\n        currentDiseases: this.state.patientDetails[patId]['current_medications'],\n        addDisease: this.addDisease.bind(this),\n        removeDisease: this.removeDisease.bind(this),\n        addMedication: this.addMedication.bind(this),\n        removeMedication: this.removeMedication.bind(this),\n        addAvoid: this.addAvoid.bind(this),\n        removeAvoid: this.removeAvoid.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    var patientIds = [];\n    /*\n        data is of the form:\n        data: [patid(email add): {\n                medical_history: [disease1:{\n                        medications: [med1,med2,med3].\n                        avoid: [av1,av2,av3]\n                    },\n                    disease2: {\n                        medicatiosn: [med1,med2,med3],\n                        avoid: [av1,av2,av3]\n                    }\n                ],\n                current_medications: [disease1: {\n                        medications: [],\n                        avoid: []\n                    },\n                    disease2: {\n                        medications: [],\n                        avoid: []\n                    },\n                ]\n            },\n            patid: ...,\n            patid: ...\n        ]\n    */\n\n    for (var key in this.state.patientDetails) {\n      patientIds.push(key);\n    }\n\n    var patientButtons = patientIds.map(id => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: this.showPatientDetails.bind(this),\n      className: \"PatientIdButton\",\n      children: id\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 47\n    }, this));\n    patientButtons = /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: patientButtons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 24\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [patientButtons, /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: this.state.showPatientCard && 'block' || 'none'\n        },\n        children: this.getPatientCard(this.state.patientId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nexport default DocForm;","map":{"version":3,"sources":["/home/shayak/Desktop/MyPrograms/GroupProject/my-app/src/components/doc_form_page/DocForm.js"],"names":["React","Disease","Container","DocForm","Component","constructor","props","state","patientDetails","name","age","blood_group","medical_history","disease1","medications","avoid","disease2","current_medications","showPatientCard","patientId","componentDidMount","reflectDetails","e","setState","bind","fetch","method","credentials","then","json","console","log","showPatientDetails","event","preventDefault","patId","target","textContent","addDisease","diseaseObj","tempObj","removeDisease","diseaseName","addMedication","medicine","push","removeMedication","list","newList","i","addAvoid","removeAvoid","getPatientCard","disList","key","makeDiseaseDetail","details","map","medHistory","dis","render","patientIds","patientButtons","id","display"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './DocForm.css';\nimport Disease from './Disease';\nimport Container from './Container';\n\nclass DocForm extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            patientDetails:{\n                'pat1@gmail.com': {\n                    name: 'Shayak Sarkar',\n                    age: 21,\n                    blood_group: 'O-',\n                    medical_history: {\n                        disease1:{\n                            medications: ['med1','med2','med3'],\n                            avoid: ['av1','av2','av3']\n                        },\n                        disease2: {\n                            medications: ['med1','med2','med3'],\n                            avoid: ['av1','av2','av3']\n                        }\n                    },\n                    current_medications:{\n                        disease1: {\n                            medications: [],\n                            avoid: []\n                        },\n                    }\n                },\n                'pat2@gmail.com': {\n                    name: 'Random Sad Person',\n                    age: 20,\n                    blood_group: 'Z*',\n                    medical_history: {},\n                    current_medications: {\n                        'Random Disease': {\n                            medications: ['med1','med2'],\n                            avoid: ['everything','nothing']\n                        }\n                    }\n                }\n            },\n            showPatientCard: false,\n            patientId: null\n        };\n    }\n    componentDidMount(){\n        var reflectDetails=function (e){\n            this.setState({\n                patientDetails: e['patient_details']\n            });\n        };\n        reflectDetails.bind(this)\n        fetch('http://localhost:5000/get_patient_details/',{\n            method: 'GET',\n            credentials: 'include'\n        })\n        .then(e=>e.json())\n        .then((e)=>{\n            console.log('DocForm.js: componentDidMount(): ',e);\n            reflectDetails(e);\n        });\n    }\n    showPatientDetails(event){\n        event.preventDefault();\n        var patId=event.target.textContent;\n        console.log(patId);\n        console.log(this.state);\n        this.setState({\n            showPatientCard: true,\n            patientId: patId\n        })\n    }\n    addDisease(diseaseObj){\n        var tempObj=this.state.patientDetails;\n        console.log('DocForm.js: addDisease():',diseaseObj);\n        tempObj[this.state.patientId]['current_medications'][diseaseObj['name']]={\n            medications: diseaseObj['medications'],\n            avoid: diseaseObj['avoid']\n        };\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeDisease(diseaseName){\n        var tempObj=this.state.patientDetails;\n        delete tempObj[this.state.patientId]['current_medications'][diseaseName]\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    addMedication(diseaseName,medicine){\n        console.log('DocForm.js: addMedication() ',diseaseName);\n        console.log('DocForm.js: addMedication() medicine =',medicine);\n        var tempObj=this.state.patientDetails;\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'].push(medicine);\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeMedication(diseaseName,medicine){\n        var tempObj=this.state.patientDetails;\n        var list=tempObj[this.state.patientId]['current_medications'][diseaseName]['medications'];\n        var newList=[];\n        for(var i in list){\n            if(list[i]!=medicine){\n                newList.push(list[i]);\n            }\n        }\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['medications']=newList;\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    addAvoid(diseaseName,avoid){\n        var tempObj=this.state.patientDetails;\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'].push(avoid);\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    removeAvoid(diseaseName,avoid){\n        var tempObj=this.state.patientDetails;\n        var newList=[];\n        var list=tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid'];\n        for(var i in list){\n            if(list[i]!=avoid){\n                newList.push(list[i]);\n            }\n        }\n        tempObj[this.state.patientId]['current_medications'][diseaseName]['avoid']=newList;\n        this.setState({\n            patientDetails: tempObj\n        });\n    }\n    getPatientCard(patId){\n        if(!patId){\n            return <div></div>;\n        }\n        console.log('getPatientCard: patient id: ',patId);\n        var disList=[];\n        for(var key in this.state.patientDetails[patId]['medical_history']){\n            disList.push(key);\n        }\n        function makeDiseaseDetail(details,name){\n            return <div>\n                Disease Name: {name}<br/>\n                Medications: <br/>\n                <ul>\n                    {details['medications'].map((e)=><li key={e}>{e}</li>)}\n                </ul>\n                Things to Avoid: <br/>\n                <ul>\n                    {details['avoid'].map((e)=><li key={e}>{e}</li>)}\n                </ul>\n            </div>;\n        }\n        var medHistory=disList.map(dis=><li key={dis}>{makeDiseaseDetail(this.state.patientDetails[patId]['medical_history'][dis],dis)}</li>);\n        return <div>\n            Name: {this.state.patientDetails[patId]['name']}<br/>\n            Age: {this.state.patientDetails[patId]['age']}<br/>\n            Blood Group: {this.state.patientDetails[patId]['blood_group']}<br/>\n            Medical History:<br/>\n            <ul>\n                {medHistory}\n            </ul>\n            Current Medications: <br/>\n            <Disease currentDiseases={this.state.patientDetails[patId]['current_medications']}\n                addDisease={this.addDisease.bind(this)}\n                removeDisease={this.removeDisease.bind(this)}\n                addMedication={this.addMedication.bind(this)}\n                removeMedication={this.removeMedication.bind(this)}\n                addAvoid={this.addAvoid.bind(this)}\n                removeAvoid={this.removeAvoid.bind(this)}\n            />\n        </div>\n    }\n    render(){\n        var patientIds=[];\n        /*\n            data is of the form:\n            data: [patid(email add): {\n                    medical_history: [disease1:{\n                            medications: [med1,med2,med3].\n                            avoid: [av1,av2,av3]\n                        },\n                        disease2: {\n                            medicatiosn: [med1,med2,med3],\n                            avoid: [av1,av2,av3]\n                        }\n                    ],\n                    current_medications: [disease1: {\n                            medications: [],\n                            avoid: []\n                        },\n                        disease2: {\n                            medications: [],\n                            avoid: []\n                        },\n                    ]\n                },\n                patid: ...,\n                patid: ...\n            ]\n        */\n        for(var key in this.state.patientDetails){\n            patientIds.push(key);\n        }\n        var patientButtons=patientIds.map(id=><button key={id} onClick={this.showPatientDetails.bind(this)} className='PatientIdButton'>{id}</button>);\n        patientButtons=<ul>{patientButtons}</ul>\n        return <div>\n            {patientButtons}\n            <div style={{display: (this.state.showPatientCard && 'block') || 'none'}}>\n                {this.getPatientCard(this.state.patientId)}\n            </div>\n        </div>;\n    }\n}\nexport default DocForm;\n"]},"metadata":{},"sourceType":"module"}